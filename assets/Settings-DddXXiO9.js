import{r as p,j as e,c as V,ar as bn,m as $s}from"./vendor-CTtG1aUU.js";import{W as Vs,C as W,X as an,Y as Us,Z as Dt,L as gn,_ as Pt,$ as hn,a0 as ct,B as G,a1 as xn,n as Ws,a2 as fn,a3 as Zt,a4 as es,a5 as Gs,a6 as Ys,a7 as Rs,a8 as rn,a9 as Qs,aa as pn,ab as on,ac as _t,ad as At,ae as A,af as yn,ag as zs,p as f,u as vn,x as Et,ah as Hs,ai as ln,aj as jn,ak as wn,al as cn,am as Sn,an as Nn,ao as Lt,ap as $e,k as qs,aq as dn,ar as Cn,as as kn,at as Tn,au as un,av as En,aw as Zs,ax as Dn,ay as mn,b as Ln,az as Pn,aA as _n,aB as en,aC as tn,aD as An,aE as On,aF as Mn,aG as In,aH as Bn,aI as Fn,aJ as Kn,aK as Hn,T as Vn,aL as Un}from"./index-B6BR6rDC.js";import{g as Rn,c as Qt}from"./auth-DqTHE5Ot.js";import{b as O,e as Js,d as ne,a as zn,_ as $n,y as Wn}from"./react-dom-DtOyD6e-.js";import{I as re,b as z,s as Gn,F as Yn,g as qn}from"./Icons-BapQY1Uh.js";import"./hls-CJm5oz2q.js";import"./language-db-CHnJe_TE.js";import"./caption-parsing-08ziiJls.js";import"./locales-BbqYBiZD.js";var ts={exports:{}};ts.exports;(function(s,n){var o=200,u="__lodash_hash_undefined__",c=1,v=2,h=9007199254740991,m="[object Arguments]",x="[object Array]",w="[object AsyncFunction]",b="[object Boolean]",k="[object Date]",g="[object Error]",N="[object Function]",M="[object GeneratorFunction]",I="[object Map]",j="[object Number]",U="[object Null]",D="[object Object]",Z="[object Promise]",oe="[object Proxy]",ye="[object RegExp]",le="[object Set]",We="[object String]",Ge="[object Symbol]",dt="[object Undefined]",ve="[object WeakMap]",Ye="[object ArrayBuffer]",ge="[object DataView]",ut="[object Float32Array]",ke="[object Float64Array]",mt="[object Int8Array]",qe="[object Int16Array]",bt="[object Int32Array]",Je="[object Uint8Array]",gt="[object Uint8ClampedArray]",ht="[object Uint16Array]",Xe="[object Uint32Array]",Qe=/[\\^$.*+?()[\]{}|]/g,Ze=/^\[object .+?Constructor\]$/,xt=/^(?:0|[1-9]\d*)$/,C={};C[ut]=C[ke]=C[mt]=C[qe]=C[bt]=C[Je]=C[gt]=C[ht]=C[Xe]=!0,C[m]=C[x]=C[Ye]=C[b]=C[ge]=C[k]=C[g]=C[N]=C[I]=C[j]=C[D]=C[ye]=C[le]=C[We]=C[ve]=!1;var Te=typeof Qt=="object"&&Qt&&Qt.Object===Object&&Qt,et=typeof self=="object"&&self&&self.Object===Object&&self,J=Te||et||Function("return this")(),Ee=n&&!n.nodeType&&n,De=Ee&&!0&&s&&!s.nodeType&&s,Le=De&&De.exports===Ee,Pe=Le&&Te.process,_e=function(){try{return Pe&&Pe.binding&&Pe.binding("util")}catch{}}(),Ae=_e&&_e.isTypedArray;function Oe(t,a){for(var l=-1,d=t==null?0:t.length,E=0,y=[];++l<d;){var P=t[l];a(P,l,t)&&(y[E++]=P)}return y}function ft(t,a){for(var l=-1,d=a.length,E=t.length;++l<d;)t[E+l]=a[l];return t}function pt(t,a){for(var l=-1,d=t==null?0:t.length;++l<d;)if(a(t[l],l,t))return!0;return!1}function tt(t,a){for(var l=-1,d=Array(t);++l<t;)d[l]=a(l);return d}function yt(t){return function(a){return t(a)}}function Me(t,a){return t.has(a)}function vt(t,a){return t==null?void 0:t[a]}function st(t){var a=-1,l=Array(t.size);return t.forEach(function(d,E){l[++a]=[E,d]}),l}function jt(t,a){return function(l){return t(a(l))}}function Ie(t){var a=-1,l=Array(t.size);return t.forEach(function(d){l[++a]=d}),l}var B=Array.prototype,nt=Function.prototype,he=Object.prototype,je=J["__core-js_shared__"],X=nt.toString,Y=he.hasOwnProperty,Be=function(){var t=/[^.]+$/.exec(je&&je.keys&&je.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),r=he.toString,wt=RegExp("^"+X.call(Y).replace(Qe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),at=Le?J.Buffer:void 0,we=J.Symbol,i=J.Uint8Array,T=he.propertyIsEnumerable,_=B.splice,F=we?we.toStringTag:void 0,K=Object.getOwnPropertySymbols,q=at?at.isBuffer:void 0,Fe=jt(Object.keys,Object),Ke=Ne(J,"DataView"),ce=Ne(J,"Map"),He=Ne(J,"Promise"),Se=Ne(J,"Set"),xe=Ne(J,"WeakMap"),ee=Ne(Object,"create"),ss=fe(Ke),ns=fe(ce),as=fe(He),Ot=fe(Se),is=fe(xe),Mt=we?we.prototype:void 0,St=Mt?Mt.valueOf:void 0;function de(t){var a=-1,l=t==null?0:t.length;for(this.clear();++a<l;){var d=t[a];this.set(d[0],d[1])}}function rs(){this.__data__=ee?ee(null):{},this.size=0}function os(t){var a=this.has(t)&&delete this.__data__[t];return this.size-=a?1:0,a}function ls(t){var a=this.__data__;if(ee){var l=a[t];return l===u?void 0:l}return Y.call(a,t)?a[t]:void 0}function It(t){var a=this.__data__;return ee?a[t]!==void 0:Y.call(a,t)}function cs(t,a){var l=this.__data__;return this.size+=this.has(t)?0:1,l[t]=ee&&a===void 0?u:a,this}de.prototype.clear=rs,de.prototype.delete=os,de.prototype.get=ls,de.prototype.has=It,de.prototype.set=cs;function ae(t){var a=-1,l=t==null?0:t.length;for(this.clear();++a<l;){var d=t[a];this.set(d[0],d[1])}}function ds(){this.__data__=[],this.size=0}function Bt(t){var a=this.__data__,l=Ve(a,t);if(l<0)return!1;var d=a.length-1;return l==d?a.pop():_.call(a,l,1),--this.size,!0}function us(t){var a=this.__data__,l=Ve(a,t);return l<0?void 0:a[l][1]}function ms(t){return Ve(this.__data__,t)>-1}function bs(t,a){var l=this.__data__,d=Ve(l,t);return d<0?(++this.size,l.push([t,a])):l[d][1]=a,this}ae.prototype.clear=ds,ae.prototype.delete=Bt,ae.prototype.get=us,ae.prototype.has=ms,ae.prototype.set=bs;function ue(t){var a=-1,l=t==null?0:t.length;for(this.clear();++a<l;){var d=t[a];this.set(d[0],d[1])}}function gs(){this.size=0,this.__data__={hash:new de,map:new(ce||ae),string:new de}}function hs(t){var a=rt(this,t).delete(t);return this.size-=a?1:0,a}function xs(t){return rt(this,t).get(t)}function Ft(t){return rt(this,t).has(t)}function fs(t,a){var l=rt(this,t),d=l.size;return l.set(t,a),this.size+=l.size==d?0:1,this}ue.prototype.clear=gs,ue.prototype.delete=hs,ue.prototype.get=xs,ue.prototype.has=Ft,ue.prototype.set=fs;function it(t){var a=-1,l=t==null?0:t.length;for(this.__data__=new ue;++a<l;)this.add(t[a])}function ps(t){return this.__data__.set(t,u),this}function Kt(t){return this.__data__.has(t)}it.prototype.add=it.prototype.push=ps,it.prototype.has=Kt;function me(t){var a=this.__data__=new ae(t);this.size=a.size}function ys(){this.__data__=new ae,this.size=0}function vs(t){var a=this.__data__,l=a.delete(t);return this.size=a.size,l}function Ht(t){return this.__data__.get(t)}function js(t){return this.__data__.has(t)}function ws(t,a){var l=this.__data__;if(l instanceof ae){var d=l.__data__;if(!ce||d.length<o-1)return d.push([t,a]),this.size=++l.size,this;l=this.__data__=new ue(d)}return l.set(t,a),this.size=l.size,this}me.prototype.clear=ys,me.prototype.delete=vs,me.prototype.get=Ht,me.prototype.has=js,me.prototype.set=ws;function Ss(t,a){var l=ot(t),d=!l&&Ms(t),E=!l&&!d&&lt(t),y=!l&&!d&&!E&&Yt(t),P=l||d||E||y,H=P?tt(t.length,String):[],R=H.length;for(var L in t)Y.call(t,L)&&!(P&&(L=="length"||E&&(L=="offset"||L=="parent")||y&&(L=="buffer"||L=="byteLength"||L=="byteOffset")||Ps(L,R)))&&H.push(L);return H}function Ve(t,a){for(var l=t.length;l--;)if(kt(t[l][0],a))return l;return-1}function Ns(t,a,l){var d=a(t);return ot(t)?d:ft(d,l(t))}function Ue(t){return t==null?t===void 0?dt:U:F&&F in Object(t)?Ls(t):Os(t)}function Vt(t){return Re(t)&&Ue(t)==m}function Nt(t,a,l,d,E){return t===a?!0:t==null||a==null||!Re(t)&&!Re(a)?t!==t&&a!==a:Cs(t,a,l,d,Nt,E)}function Cs(t,a,l,d,E,y){var P=ot(t),H=ot(a),R=P?x:be(t),L=H?x:be(a);R=R==m?D:R,L=L==m?D:L;var Q=R==D,ie=L==D,$=R==L;if($&&lt(t)){if(!lt(a))return!1;P=!0,Q=!1}if($&&!Q)return y||(y=new me),P||Yt(t)?Rt(t,a,l,d,E,y):Es(t,a,R,l,d,E,y);if(!(l&c)){var te=Q&&Y.call(t,"__wrapped__"),se=ie&&Y.call(a,"__wrapped__");if(te||se){var Ce=te?t.value():t,pe=se?a.value():a;return y||(y=new me),E(Ce,pe,l,d,y)}}return $?(y||(y=new me),Ds(t,a,l,d,E,y)):!1}function ks(t){if(!Tt(t)||$t(t))return!1;var a=Wt(t)?wt:Ze;return a.test(fe(t))}function Ts(t){return Re(t)&&Gt(t.length)&&!!C[Ue(t)]}function Ut(t){if(!As(t))return Fe(t);var a=[];for(var l in Object(t))Y.call(t,l)&&l!="constructor"&&a.push(l);return a}function Rt(t,a,l,d,E,y){var P=l&c,H=t.length,R=a.length;if(H!=R&&!(P&&R>H))return!1;var L=y.get(t);if(L&&y.get(a))return L==a;var Q=-1,ie=!0,$=l&v?new it:void 0;for(y.set(t,a),y.set(a,t);++Q<H;){var te=t[Q],se=a[Q];if(d)var Ce=P?d(se,te,Q,a,t,y):d(te,se,Q,t,a,y);if(Ce!==void 0){if(Ce)continue;ie=!1;break}if($){if(!pt(a,function(pe,ze){if(!Me($,ze)&&(te===pe||E(te,pe,l,d,y)))return $.push(ze)})){ie=!1;break}}else if(!(te===se||E(te,se,l,d,y))){ie=!1;break}}return y.delete(t),y.delete(a),ie}function Es(t,a,l,d,E,y,P){switch(l){case ge:if(t.byteLength!=a.byteLength||t.byteOffset!=a.byteOffset)return!1;t=t.buffer,a=a.buffer;case Ye:return!(t.byteLength!=a.byteLength||!y(new i(t),new i(a)));case b:case k:case j:return kt(+t,+a);case g:return t.name==a.name&&t.message==a.message;case ye:case We:return t==a+"";case I:var H=st;case le:var R=d&c;if(H||(H=Ie),t.size!=a.size&&!R)return!1;var L=P.get(t);if(L)return L==a;d|=v,P.set(t,a);var Q=Rt(H(t),H(a),d,E,y,P);return P.delete(t),Q;case Ge:if(St)return St.call(t)==St.call(a)}return!1}function Ds(t,a,l,d,E,y){var P=l&c,H=Ct(t),R=H.length,L=Ct(a),Q=L.length;if(R!=Q&&!P)return!1;for(var ie=R;ie--;){var $=H[ie];if(!(P?$ in a:Y.call(a,$)))return!1}var te=y.get(t);if(te&&y.get(a))return te==a;var se=!0;y.set(t,a),y.set(a,t);for(var Ce=P;++ie<R;){$=H[ie];var pe=t[$],ze=a[$];if(d)var Xs=P?d(ze,pe,$,a,t,y):d(pe,ze,$,t,a,y);if(!(Xs===void 0?pe===ze||E(pe,ze,l,d,y):Xs)){se=!1;break}Ce||(Ce=$=="constructor")}if(se&&!Ce){var Jt=t.constructor,Xt=a.constructor;Jt!=Xt&&"constructor"in t&&"constructor"in a&&!(typeof Jt=="function"&&Jt instanceof Jt&&typeof Xt=="function"&&Xt instanceof Xt)&&(se=!1)}return y.delete(t),y.delete(a),se}function Ct(t){return Ns(t,Fs,zt)}function rt(t,a){var l=t.__data__;return _s(a)?l[typeof a=="string"?"string":"hash"]:l.map}function Ne(t,a){var l=vt(t,a);return ks(l)?l:void 0}function Ls(t){var a=Y.call(t,F),l=t[F];try{t[F]=void 0;var d=!0}catch{}var E=r.call(t);return d&&(a?t[F]=l:delete t[F]),E}var zt=K?function(t){return t==null?[]:(t=Object(t),Oe(K(t),function(a){return T.call(t,a)}))}:qt,be=Ue;(Ke&&be(new Ke(new ArrayBuffer(1)))!=ge||ce&&be(new ce)!=I||He&&be(He.resolve())!=Z||Se&&be(new Se)!=le||xe&&be(new xe)!=ve)&&(be=function(t){var a=Ue(t),l=a==D?t.constructor:void 0,d=l?fe(l):"";if(d)switch(d){case ss:return ge;case ns:return I;case as:return Z;case Ot:return le;case is:return ve}return a});function Ps(t,a){return a=a??h,!!a&&(typeof t=="number"||xt.test(t))&&t>-1&&t%1==0&&t<a}function _s(t){var a=typeof t;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?t!=="__proto__":t===null}function $t(t){return!!Be&&Be in t}function As(t){var a=t&&t.constructor,l=typeof a=="function"&&a.prototype||he;return t===l}function Os(t){return r.call(t)}function fe(t){if(t!=null){try{return X.call(t)}catch{}try{return t+""}catch{}}return""}function kt(t,a){return t===a||t!==t&&a!==a}var Ms=Vt(function(){return arguments}())?Vt:function(t){return Re(t)&&Y.call(t,"callee")&&!T.call(t,"callee")},ot=Array.isArray;function Is(t){return t!=null&&Gt(t.length)&&!Wt(t)}var lt=q||Ks;function Bs(t,a){return Nt(t,a)}function Wt(t){if(!Tt(t))return!1;var a=Ue(t);return a==N||a==M||a==w||a==oe}function Gt(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=h}function Tt(t){var a=typeof t;return t!=null&&(a=="object"||a=="function")}function Re(t){return t!=null&&typeof t=="object"}var Yt=Ae?yt(Ae):Ts;function Fs(t){return Is(t)?Ss(t):Ut(t)}function qt(){return[]}function Ks(){return!1}s.exports=Bs})(ts,ts.exports);var Jn=ts.exports;const Xn=Rn(Jn);function S(s){const[n,o]=p.useState(void 0);p.useEffect(()=>{o(void 0)},[s]);const u=p.useMemo(()=>!Xn(n,s)&&n!==void 0,[n,s]),c=p.useCallback(m=>{m instanceof Function?o(x=>m(x!==void 0?x:s)):o(m)},[s,o]),v=n===void 0?s:n,h=p.useCallback(()=>o(void 0),[o]);return[v,c,h,u]}function Qn(s,n,o,u,c,v,h,m,x,w,b,k,g,N,M,I,j,U,D,Z,oe,ye,le,We,Ge,dt,ve,Ye,ge,ut,ke){const[mt,qe,bt,Je]=S(c),[gt,ht,Xe,Qe]=S(v),[Ze,xt,C,Te]=S(h),[et,J,Ee,De]=S(m),[Le,Pe,_e,Ae]=S(s),Oe=Vs(a=>a.setPreviewTheme),ft=p.useCallback(()=>Oe(s),[Oe,s]),[pt,tt,yt,Me]=S(n),[vt,st,jt,Ie]=S(o),[B,nt,he,je]=S(u),[X,Y,Be,r]=S(x),[wt,at,we,i]=S(w),[T,_,F,K]=S(b),[q,Fe,Ke,ce]=S(ye),[He,Se,xe,ee]=S(k),[ss,ns,as,Ot]=S(g),[is,Mt,St,de]=S(N),[rs,os,ls,It]=S(le),[cs,ae,ds,Bt]=S(M),[us,ms,bs,ue]=S(I),[gs,hs,xs,Ft]=S(j),[fs,it,ps,Kt]=S(U),[me,ys,vs,Ht]=S(D),[js,ws,Ss,Ve]=S(Z),[Ns,Ue,Vt,Nt]=S(oe),[Cs,ks,Ts,Ut]=S(We),[Rt,Es,Ds,Ct]=S(Ge),[rt,Ne,Ls,zt]=S(dt),[be,Ps,_s,$t]=S(ve),[As,Os,fe,kt]=S(Ye),[Ms,ot,Is,lt]=S(ge),[Bs,Wt,Gt,Tt]=S(ut),[Re,Yt,Fs,qt]=S(ke);function Ks(){_e(),ft(),yt(),jt(),bt(),Xe(),C(),Ee(),he(),Be(),we(),F(),Ke(),xe(),as(),St(),ls(),ds(),bs(),xs(),ps(),vs(),Ss(),Vt(),Ts(),Ds(),Ls(),_s(),fe(),Is(),Gt(),Fs()}return{reset:Ks,changed:Ae||Me||Ie||je||Qe||Je||Te||De||r||i||K||ce||ee||Ot||de||It||Bt||ue||Ft||Kt||Ht||Ve||Nt||Ut||Ct||zt||$t||kt||lt||Tt||qt,theme:{state:Le,set:Pe,changed:Ae},appLanguage:{state:pt,set:tt,changed:Me},subtitleStyling:{state:vt,set:st,changed:Ie},deviceName:{state:B,set:nt,changed:je},proxyUrls:{state:mt,set:qe,changed:Je},backendUrl:{state:gt,set:ht,changed:Qe},febboxKey:{state:Ze,set:xt,changed:Te},realDebridKey:{state:et,set:J,changed:De},profile:{state:X,set:Y,changed:r},enableThumbnails:{state:wt,set:at,changed:i},enableAutoplay:{state:T,set:_,changed:K},enableSkipCredits:{state:q,set:Fe,changed:ce},enableDiscover:{state:He,set:Se,changed:ee},enableFeatured:{state:ss,set:ns,changed:Ot},enableDetailsModal:{state:is,set:Mt,changed:de},enableImageLogos:{state:rs,set:os,changed:It},sourceOrder:{state:cs,set:ae,changed:Bt},enableSourceOrder:{state:us,set:ms,changed:ue},proxyTmdb:{state:Ns,set:Ue,changed:Nt},disabledSources:{state:gs,set:hs,changed:Ft},embedOrder:{state:fs,set:it,changed:Kt},enableEmbedOrder:{state:me,set:ys,changed:Ht},disabledEmbeds:{state:js,set:ws,changed:Ve},enableCarouselView:{state:Cs,set:ks,changed:Ut},forceCompactEpisodeView:{state:Rt,set:Es,changed:Ct},enableLowPerformanceMode:{state:rt,set:Ne,changed:zt},enableNativeSubtitles:{state:be,set:Ps,changed:$t},enableHoldToBoost:{state:As,set:Os,changed:kt},homeSectionOrder:{state:Ms,set:ot,changed:lt},manualSourceSelection:{state:Bs,set:Wt,changed:Tt},enableDoubleClickToSeek:{state:Re,set:Yt,changed:qt}}}function Zn(s){return e.jsx("p",{className:"text-type-text",children:s.children})}const ea=()=>{document.querySelectorAll(".logout-button").forEach(n=>{n.click()})};function ta(s){const{t:n}=O(),o=Pt(),u=W(h=>{var m;return(m=h.account)==null?void 0:m.token}),[c,v]=Js(async()=>{var h;if(!u)throw new Error("No token present");if(!o)throw new Error("No backend set");await hn(o,u,s.id),(h=s.onRemove)==null||h.call(s)},[o,u,s.id]);return e.jsxs(ct,{className:"flex justify-between items-center",paddingClass:"px-6 py-4",children:[e.jsxs("div",{className:"font-medium",children:[e.jsx(Zn,{children:n("settings.account.devices.deviceNameLabel")}),e.jsx("p",{className:"text-white",children:s.name})]}),s.isCurrent?null:e.jsx(G,{theme:"danger",className:"logout-button",loading:c.loading,onClick:v,children:n("settings.account.devices.removeDevice")})]})}function sa(s){const{t:n}=O(),o=W(h=>{var m;return(m=h.account)==null?void 0:m.seed}),u=s.sessions,c=W(h=>{var m;return(m=h.account)==null?void 0:m.sessionId}),v=p.useMemo(()=>{if(!o)return[];let h=u.map(m=>{const x=an(m.device,Us(o));return{current:m.id===c,id:m.id,name:x}});return h=h.sort((m,x)=>m.current?-1:x.current?1:m.name.localeCompare(x.name)),h},[o,u,c]);return o?e.jsxs("div",{children:[e.jsx(Dt,{border:!0,className:"mt-0 mb-9",children:n("settings.account.devices.title")}),s.error?e.jsx("p",{children:n("settings.account.devices.failed")}):s.loading?e.jsx(gn,{}):e.jsx("div",{className:"space-y-5",children:v.map(h=>e.jsx(ta,{name:h.name,id:h.id,isCurrent:h.current,onRemove:s.onChange},h.id))})]}):null}function na(){const{t:s}=O(),n=Pt(),o=W(m=>m.account),{logout:u}=xn(),c=Ws("account-delete"),[v,h]=Js(async()=>{!o||!n||(await fn(n,o),await u(),c.hide())},[u,o,n,c.hide]);return o?e.jsxs("div",{children:[e.jsx(Dt,{border:!0,children:s("settings.account.actions.title")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(Zt,{paddingClass:"px-6 py-8",className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsx(es,{children:s("settings.account.actions.migration.title")}),e.jsx("p",{className:"text-type-text mt-3",children:s("settings.account.actions.migration.text")})]}),e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx(G,{theme:"purple",onClick:()=>{window.location.href="/migration"},children:s("settings.account.actions.migration.button")})})]}),e.jsxs(Zt,{paddingClass:"px-6 py-8",className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsx(es,{children:s("settings.account.actions.logoutAllDevices.title")}),e.jsx("p",{className:"text-type-text mt-3",children:s("settings.account.actions.logoutAllDevices.text")})]}),e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx(G,{theme:"danger",onClick:ea,children:s("settings.account.actions.logoutAllDevices.button")})})]}),e.jsxs(Zt,{paddingClass:"px-6 py-8",className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex-grow",children:[e.jsx(es,{children:s("settings.account.actions.delete.title")}),e.jsx("p",{className:"text-type-text mt-3",children:s("settings.account.actions.delete.text")})]}),e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx(G,{theme:"danger",loading:v.loading,onClick:c.show,children:s("settings.account.actions.delete.button")})})]})]}),e.jsx(Gs,{id:c.id,children:e.jsxs(Ys,{children:[e.jsx(Dt,{className:"!mt-0",children:s("settings.account.actions.delete.confirmTitle")}),e.jsx(Rs,{children:s("settings.account.actions.delete.confirmDescription")}),e.jsxs("div",{className:"flex gap-4 mt-4 justify-between",children:[e.jsx(G,{theme:"secondary",onClick:c.hide,children:s("onboarding.defaultConfirm.cancel")}),e.jsx(G,{theme:"danger",loading:v.loading,onClick:h,children:s("settings.account.actions.delete.confirmButton")})]})]})})]}):null}function aa(s){const{t:n}=O();return e.jsx(Gs,{id:s.id,children:e.jsxs(Ys,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-9",children:[e.jsx(Dt,{className:"!mt-0 !mb-0",children:n("settings.account.profile.title")}),e.jsx(rn,{profile:{colorA:s.colorA,colorB:s.colorB,icon:s.userIcon},iconClass:"text-2xl",sizeClass:"w-12 h-12"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(Qs,{label:n("settings.account.profile.firstColor"),value:s.colorA,onInput:s.setColorA}),e.jsx(Qs,{label:n("settings.account.profile.secondColor"),value:s.colorB,onInput:s.setColorB}),e.jsx(pn,{label:n("settings.account.profile.userIcon"),value:s.userIcon,onInput:s.setUserIcon})]}),e.jsx("div",{className:"flex justify-center mt-8",children:e.jsx(G,{theme:"purple",className:"!px-20",onClick:s.close,children:n("settings.account.profile.finish")})})]})})}function ia(s){const{t:n}=O(),{logout:o}=on(),u=Ws("profile-edit");return e.jsxs(ct,{paddingClass:"px-8 py-10",className:"!mt-8",children:[e.jsx(aa,{id:u.id,close:u.hide,colorA:s.colorA,setColorA:s.setColorA,colorB:s.colorB,setColorB:s.setColorB,userIcon:s.userIcon,setUserIcon:s.setUserIcon}),e.jsxs("div",{className:"grid lg:grid-cols-[auto,1fr] gap-8",children:[e.jsx("div",{children:e.jsx(rn,{profile:{colorA:s.colorA,colorB:s.colorB,icon:s.userIcon},iconClass:"text-5xl",sizeClass:"w-32 h-32",bottom:e.jsxs("button",{type:"button",className:"tabbable text-xs flex gap-2 items-center bg-editBadge-bg text-editBadge-text hover:bg-editBadge-bgHover py-1 px-3 rounded-full cursor-pointer",onClick:u.show,children:[e.jsx(re,{icon:z.EDIT}),n("settings.account.accountDetails.editProfile")]})})}),e.jsx("div",{children:e.jsxs("div",{className:"space-y-8 max-w-xs",children:[e.jsx(_t,{label:n("settings.account.accountDetails.deviceNameLabel")??void 0,placeholder:n("settings.account.accountDetails.deviceNamePlaceholder")??void 0,value:s.deviceName,onChange:c=>s.setDeviceName(c)}),e.jsx("div",{className:"flex space-x-3",children:e.jsx(G,{className:"logout-button",theme:"danger",onClick:o,children:n("settings.account.accountDetails.logoutButton")})})]})})]})]})}const ra=[{id:"default",selector:"theme-default",key:"settings.appearance.themes.default"},{id:"classic",selector:"theme-classic",key:"settings.appearance.themes.classic"},{id:"blue",selector:"theme-blue",key:"settings.appearance.themes.blue"},{id:"teal",selector:"theme-teal",key:"settings.appearance.themes.teal"},{id:"red",selector:"theme-red",key:"settings.appearance.themes.red"},{id:"gray",selector:"theme-gray",key:"settings.appearance.themes.gray"},{id:"green",selector:"theme-green",key:"settings.appearance.themes.green"},{id:"forest",selector:"theme-forest",key:"settings.appearance.themes.forest"},{id:"autumn",selector:"theme-autumn",key:"settings.appearance.themes.autumn"},{id:"mocha",selector:"theme-mocha",key:"settings.appearance.themes.mocha"},{id:"pink",selector:"theme-pink",key:"settings.appearance.themes.pink"},{id:"noir",selector:"theme-noir",key:"settings.appearance.themes.noir"},{id:"ember",selector:"theme-ember",key:"settings.appearance.themes.ember"},{id:"acid",selector:"theme-acid",key:"settings.appearance.themes.acid"},{id:"spark",selector:"theme-spark",key:"settings.appearance.themes.spark"},{id:"grape",selector:"theme-grape",key:"settings.appearance.themes.grape"},{id:"spiderman",selector:"theme-spiderman",key:"settings.appearance.themes.spiderman"},{id:"wolverine",selector:"theme-wolverine",key:"settings.appearance.themes.wolverine"},{id:"hulk",selector:"theme-hulk",key:"settings.appearance.themes.hulk"},{id:"popsicle",selector:"theme-popsicle",key:"settings.appearance.themes.popsicle"},{id:"skyRealm",selector:"theme-skyrealm",key:"settings.appearance.themes.skyrealm"}],oa=function(n){const{t:o}=O();return e.jsxs("div",{className:V(n.selector,"cursor-pointer group tabbable"),onClick:n.onClick,children:[e.jsxs("div",{tabIndex:0,onKeyUp:u=>u.key==="Enter"&&u.currentTarget.click(),className:V("tabbable scroll-mt-32 w-full h-32 relative rounded-lg border bg-gradient-to-br from-themePreview-primary/20 to-themePreview-secondary/10 bg-clip-content transition-colors duration-150",n.active?"border-themePreview-primary":"border-transparent group-hover:border-white/20"),children:[e.jsxs("div",{className:"absolute top-2 left-2",children:[e.jsx("div",{className:"h-5 w-5 bg-themePreview-primary rounded-full"}),e.jsx("div",{className:"h-5 w-5 bg-themePreview-secondary rounded-full -mt-2"})]}),e.jsx(re,{icon:z.CHECKMARK,className:V("absolute top-3 right-3 text-xs text-white transition-opacity duration-150",n.active?"opacity-100":"opacity-0")}),e.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-3/5 h-4/5 rounded-t-lg -mb-px bg-background-main overflow-hidden",children:e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("div",{className:"bg-themePreview-primary/50 w-[130%] h-10 absolute left-1/2 -top-5 blur-xl transform -translate-x-1/2 rounded-[100%]"}),e.jsxs("div",{className:"p-2 flex justify-between items-center",children:[e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-4 h-2 rounded-full"}),e.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-2 h-2 rounded-full"}),e.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-2 h-2 rounded-full"})]}),e.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-2 h-2 rounded-full"})]}),e.jsxs("div",{className:"mt-1 flex items-center flex-col gap-1",children:[e.jsx("div",{className:"bg-themePreview-ghost bg-opacity-20 w-8 h-0.5 rounded-full"}),e.jsx("div",{className:"bg-themePreview-ghost bg-opacity-20 w-6 h-0.5 rounded-full"}),e.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-16 h-2 mt-1 rounded-full"})]}),e.jsxs("div",{className:"mt-5 px-3",children:[e.jsxs("div",{className:"flex gap-1 items-center",children:[e.jsx("div",{className:"bg-themePreview-ghost bg-opacity-20 w-2 h-2 rounded-full"}),e.jsx("div",{className:"bg-themePreview-ghost bg-opacity-20 w-8 h-0.5 rounded-full"})]}),e.jsxs("div",{className:"flex w-full gap-1 mt-1",children:[e.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-full h-20 rounded"}),e.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-full h-20 rounded"}),e.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-full h-20 rounded"}),e.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-full h-20 rounded"})]})]})]})})]}),e.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[e.jsx("span",{className:"font-medium text-white",children:n.name}),e.jsx("span",{className:V("inline-block px-3 py-1 leading-tight text-sm transition-opacity duration-150 rounded-full bg-pill-activeBackground text-white/85",n.inUse?"opacity-100":"opacity-0 pointer-events-none"),children:o("settings.appearance.activeTheme")})]})]})},la=oa,ca=function(n){const{t:o}=O(),u=p.useRef(null),c=p.useRef(null),[v,h]=p.useState(!0),[m,x]=p.useState(!1),{enableLowPerformanceMode:w,setEnableDiscover:b,setEnableFeatured:k,setEnableDetailsModal:g,setEnableImageLogos:N,setForceCompactEpisodeView:M}=n;p.useEffect(()=>{w&&(b(!1),k(!1),g(!1),N(!1),M(!0))},[w,b,k,g,N,M]);const I=()=>{const j=u.current;j&&(h(j.scrollTop<=0),x(Math.abs(j.scrollHeight-j.scrollTop-j.clientHeight)<2))};return p.useEffect(()=>{const j=u.current;if(j)return j.addEventListener("scroll",I),I(),()=>j.removeEventListener("scroll",I)},[]),p.useEffect(()=>{if(c.current&&u.current){const j=c.current,U=u.current,D=j.getBoundingClientRect(),Z=U.getBoundingClientRect();U.scrollTop=D.top+U.scrollTop-Z.top-(Z.height-D.height)/2,I()}},[n.active]),e.jsxs("div",{className:"space-y-12",children:[e.jsx(At,{border:!0,children:o("settings.appearance.title")}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-bold mb-3",children:o("settings.appearance.options.discover")}),e.jsx("p",{className:"max-w-[25rem] font-medium",children:o("settings.appearance.options.discoverDescription")}),e.jsxs("div",{onClick:()=>{if(!n.enableLowPerformanceMode){const j=!n.enableDiscover;n.setEnableDiscover(j),j||n.setEnableFeatured(!1)}},className:V("bg-dropdown-background hover:bg-dropdown-hoverBackground select-none my-4 cursor-pointer space-x-3 flex items-center max-w-[25rem] py-3 px-4 rounded-lg",n.enableLowPerformanceMode?"cursor-not-allowed opacity-50 pointer-events-none":"cursor-pointer opacity-100 pointer-events-auto"),children:[e.jsx(A,{enabled:n.enableDiscover}),e.jsx("p",{className:"flex-1 text-white font-bold",children:o("settings.appearance.options.discoverLabel")})]})]}),n.enableDiscover&&!n.enableLowPerformanceMode&&e.jsxs("div",{className:"pt-4 pl-4 border-l-8 border-dropdown-background",children:[e.jsx("p",{className:"text-white font-bold mb-3",children:o("settings.appearance.options.featured")}),e.jsx("p",{className:"max-w-[25rem] font-medium",children:o("settings.appearance.options.featuredDescription")}),e.jsxs("div",{onClick:()=>n.setEnableFeatured(!n.enableFeatured),className:"bg-dropdown-background hover:bg-dropdown-hoverBackground select-none my-4 cursor-pointer space-x-3 flex items-center max-w-[25rem] py-3 px-4 rounded-lg",children:[e.jsx(A,{enabled:n.enableFeatured}),e.jsx("p",{className:"flex-1 text-white font-bold",children:o("settings.appearance.options.featuredLabel")})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-bold mb-3",children:o("settings.appearance.options.modal")}),e.jsx("p",{className:"max-w-[25rem] font-medium",children:o("settings.appearance.options.modalDescription")}),e.jsxs("div",{onClick:()=>!n.enableLowPerformanceMode&&n.setEnableDetailsModal(!n.enableDetailsModal),className:V("bg-dropdown-background hover:bg-dropdown-hoverBackground select-none my-4 cursor-pointer space-x-3 flex items-center max-w-[25rem] py-3 px-4 rounded-lg",n.enableLowPerformanceMode?"cursor-not-allowed opacity-50 pointer-events-none":"cursor-pointer opacity-100 pointer-events-auto"),children:[e.jsx(A,{enabled:n.enableDetailsModal}),e.jsx("p",{className:"flex-1 text-white font-bold",children:o("settings.appearance.options.modalLabel")})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-bold mb-3",children:o("settings.appearance.options.logos")}),e.jsx("p",{className:"max-w-[25rem] font-medium",children:o("settings.appearance.options.logosDescription")}),e.jsxs("p",{className:"max-w-[25rem] font-medium pt-2 items-center flex gap-4",children:[e.jsx(re,{icon:z.CIRCLE_EXCLAMATION,className:""}),o("settings.appearance.options.logosNotice")]}),e.jsxs("div",{onClick:()=>!n.enableLowPerformanceMode&&n.setEnableImageLogos(!n.enableImageLogos),className:V("bg-dropdown-background hover:bg-dropdown-hoverBackground select-none my-4 cursor-pointer space-x-3 flex items-center max-w-[25rem] py-3 px-4 rounded-lg",n.enableLowPerformanceMode?"cursor-not-allowed opacity-50 pointer-events-none":"cursor-pointer opacity-100 pointer-events-auto"),children:[e.jsx(A,{enabled:n.enableImageLogos}),e.jsx("p",{className:"flex-1 text-white font-bold",children:o("settings.appearance.options.logosLabel")})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-bold mb-3",children:o("settings.appearance.options.carouselView")}),e.jsx("p",{className:"max-w-[25rem] font-medium",children:o("settings.appearance.options.carouselViewDescription")}),e.jsxs("div",{onClick:()=>n.setEnableCarouselView(!n.enableCarouselView),className:V("bg-dropdown-background hover:bg-dropdown-hoverBackground select-none my-4 cursor-pointer space-x-3 flex items-center max-w-[25rem] py-3 px-4 rounded-lg","cursor-pointer opacity-100 pointer-events-auto"),children:[e.jsx(A,{enabled:n.enableCarouselView}),e.jsx("p",{className:"flex-1 text-white font-bold",children:o("settings.appearance.options.carouselViewLabel")})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-bold mb-3",children:o("settings.appearance.options.forceCompactEpisodeView")}),e.jsx("p",{className:"max-w-[25rem] font-medium",children:o("settings.appearance.options.forceCompactEpisodeViewDescription")}),e.jsxs("div",{onClick:()=>!n.enableLowPerformanceMode&&n.setForceCompactEpisodeView(!n.forceCompactEpisodeView),className:V("bg-dropdown-background hover:bg-dropdown-hoverBackground select-none my-4 cursor-pointer space-x-3 flex items-center max-w-[25rem] py-3 px-4 rounded-lg",n.enableLowPerformanceMode?"cursor-not-allowed opacity-50 pointer-events-none":"cursor-pointer opacity-100 pointer-events-auto"),children:[e.jsx(A,{enabled:n.forceCompactEpisodeView}),e.jsx("p",{className:"flex-1 text-white font-bold",children:o("settings.appearance.options.forceCompactEpisodeViewLabel")})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-bold mb-3",children:o("settings.appearance.options.homeSectionOrder")}),e.jsx("p",{className:"max-w-[25rem] font-medium",children:o("settings.appearance.options.homeSectionOrderDescription")}),e.jsx("div",{className:"my-4 max-w-[25rem]",children:e.jsx(yn,{items:n.homeSectionOrder.map(j=>({id:j,name:o(`settings.appearance.sections.${j}`)})),setItems:j=>{const U=j.map(D=>D.id);n.setHomeSectionOrder(U)}})})]})]}),e.jsx("div",{className:"space-y-8",children:e.jsx("div",{ref:u,className:V("grid grid-cols-2 gap-4 max-w-[600px] max-h-[36rem] md:max-h-[64rem] overflow-y-auto","vertical-carousel-container",{"hide-top-gradient":v,"hide-bottom-gradient":m}),children:ra.map(j=>e.jsx("div",{ref:n.active===j.id?c:null,children:e.jsx(la,{selector:j.selector,active:n.active===j.id,inUse:n.inUse===j.id,name:o(j.key),onClick:()=>n.setTheme(j.id)})},j.id))})})]})]})},da=ca;function sn(s){const{t:n}=O();return e.jsxs("div",{className:V({"pointer-events-none overflow-hidden w-full rounded":!0,"aspect-video relative":!s.fullscreen,"fixed inset-0 z-[60]":s.fullscreen}),children:[s.fullscreen&&s.show?e.jsx(bn,{children:e.jsx("html",{"data-no-scroll":!0})}):null,e.jsx(cn,{animation:"fade",show:s.show,children:e.jsxs("div",{className:"absolute inset-0 pointer-events-auto",style:{backgroundImage:"radial-gradient(102.95% 87.07% at 100% 100%, #EEAA45 0%, rgba(165, 186, 151, 0.56) 54.69%, rgba(74, 207, 254, 0.00) 100%), linear-gradient(180deg, #48D3FF 0%, #3B27B2 100%)"},children:[e.jsx("button",{type:"button",className:"tabbable bg-black absolute right-3 top-3 text-white bg-opacity-25 duration-100 transition-[background-color,transform] active:scale-110 hover:bg-opacity-50 p-2 rounded-md cursor-pointer",onClick:s.onToggle,children:e.jsx(re,{icon:s.fullscreen?z.X:z.EXPAND})}),e.jsx("div",{className:"text-white pointer-events-none absolute flex w-full flex-col items-center transition-[bottom] p-4",style:{bottom:`${s.styling.verticalPosition*4}px`},children:e.jsx("div",{className:s.fullscreen?"":"transform origin-bottom text-[0.5rem]",children:e.jsx(Sn,{text:n("settings.subtitles.previewQuote")??void 0,styling:s.styling,overrideCasing:!1})})})]})})]})}function ua(s){const{t:n}=O(),[o,u]=p.useState(!1),c=zs(),v=f(),h=vn(b=>b.setCaptionAsTrack),m=v.enableNativeSubtitles;p.useEffect(()=>{c.updateStyling(s.styling)},[s.styling,c,c.updateStyling]),p.useEffect(()=>{h(m)},[m,h]);const x=b=>{s.setStyling(b),c.updateStyling(b)},w=()=>{c.resetStyling(),s.setStyling({color:"#ffffff",backgroundOpacity:.5,size:1,backgroundBlur:.5,bold:!1,verticalPosition:3,fontStyle:"default"})};return e.jsxs("div",{children:[e.jsx(At,{border:!0,children:n("settings.subtitles.title")}),e.jsxs("div",{className:"grid md:grid-cols-[1fr,356px] gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(Et.FieldTitle,{children:n("player.menus.subtitles.useNativeSubtitles")}),e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(A,{enabled:m,onClick:()=>v.setEnableNativeSubtitles(!m)})})]}),e.jsx("span",{className:"text-xs text-type-secondary",children:n("player.menus.subtitles.useNativeSubtitlesDescription")}),!m&&e.jsxs(e.Fragment,{children:[e.jsx(Hs,{label:n("settings.subtitles.backgroundLabel"),max:100,min:0,onChange:b=>x({...s.styling,backgroundOpacity:b/100}),value:s.styling.backgroundOpacity*100,textTransformer:b=>`${b}%`}),e.jsx(Hs,{label:n("settings.subtitles.backgroundBlurLabel"),max:100,min:0,onChange:b=>x({...s.styling,backgroundBlur:b/100}),value:s.styling.backgroundBlur*100,textTransformer:b=>`${b}%`}),e.jsx(Hs,{label:n("settings.subtitles.textSizeLabel"),max:200,min:1,textTransformer:b=>`${b}%`,onChange:b=>x({...s.styling,size:b/100}),value:s.styling.size*100}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(Et.FieldTitle,{children:n("settings.subtitles.textStyle.title")}),e.jsx("div",{className:"w-30",children:e.jsx(ln,{options:[{id:"default",name:n("settings.subtitles.textStyle.default")},{id:"raised",name:n("settings.subtitles.textStyle.raised")},{id:"depressed",name:n("settings.subtitles.textStyle.depressed")},{id:"uniform",name:n("settings.subtitles.textStyle.uniform")},{id:"dropShadow",name:n("settings.subtitles.textStyle.dropShadow")}],selectedItem:{id:s.styling.fontStyle,name:n(`settings.subtitles.textStyle.${s.styling.fontStyle}`)||s.styling.fontStyle},setSelectedItem:b=>x({...s.styling,fontStyle:b.id})})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(Et.FieldTitle,{children:n("settings.subtitles.textBoldLabel")}),e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(A,{enabled:s.styling.bold,onClick:()=>x({...s.styling,bold:!s.styling.bold})})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(Et.FieldTitle,{children:n("settings.subtitles.colorLabel")}),e.jsxs("div",{className:"flex justify-center items-center space-x-2",children:[jn.map(b=>e.jsx(wn,{onClick:()=>x({...s.styling,color:b}),color:b,active:s.styling.color===b},b)),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"color",value:s.styling.color,onChange:b=>{const k=b.target.value;x({...s.styling,color:k}),c.updateStyling({...s.styling,color:k})},className:"absolute opacity-0 cursor-pointer w-8 h-8"}),e.jsx("div",{style:{color:s.styling.color},children:e.jsx(re,{icon:z.BRUSH,className:"text-2xl"})})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(Et.FieldTitle,{children:n("settings.subtitles.verticalPositionLabel")}),e.jsxs("div",{className:"flex justify-center items-center space-x-2",children:[e.jsx("button",{type:"button",className:V("px-3 py-1 rounded transition-colors duration-100",s.styling.verticalPosition===3?"bg-video-context-buttonFocus":"bg-video-context-buttonFocus bg-opacity-0 hover:bg-opacity-50"),onClick:()=>x({...s.styling,verticalPosition:3}),children:n("settings.subtitles.default")}),e.jsx("button",{type:"button",className:V("px-3 py-1 rounded transition-colors duration-100",s.styling.verticalPosition===1?"bg-video-context-buttonFocus":"bg-video-context-buttonFocus bg-opacity-0 hover:bg-opacity-50"),onClick:()=>x({...s.styling,verticalPosition:1}),children:n("settings.subtitles.low")})]})]}),e.jsx(G,{className:"w-full md:w-auto",theme:"secondary",onClick:w,children:n("settings.reset")})]})]}),!m&&e.jsxs(e.Fragment,{children:[e.jsx(sn,{show:!0,styling:s.styling,onToggle:()=>u(b=>!b)}),e.jsx(sn,{show:o,fullscreen:!0,styling:s.styling,onToggle:()=>u(b=>!b)})]})]})]})}function ma({proxyUrls:s,setProxyUrls:n,proxyTmdb:o,setProxyTmdb:u}){const{t:c}=O(),v=p.useCallback(()=>{n(w=>[...w??[],""])},[n]),h=p.useCallback((w,b)=>{n(k=>[...(k??[]).map((g,N)=>N!==w?g:b)])},[n]),m=p.useCallback(w=>{n(b=>[...(b??[]).filter((k,g)=>g!==w)])},[n]),x=p.useCallback(()=>{const w=s===null?[]:null;n(w),w===null&&u(!1)},[s,n,u]);return e.jsxs(ct,{children:[e.jsxs("div",{className:"flex justify-between items-center gap-4",children:[e.jsxs("div",{className:"my-3",children:[e.jsx("p",{className:"text-white font-bold mb-3",children:c("settings.connections.workers.label")}),e.jsx("p",{className:"max-w-[30rem] font-medium",children:e.jsx(ne,{i18nKey:"settings.connections.workers.description",children:e.jsx(Lt,{to:"https://docs.pstream.mov/proxy/deploy",children:c("settings.connections.workers.documentation")})})})]}),e.jsx("div",{children:e.jsx(A,{onClick:x,enabled:s!==null})})]}),s!==null?e.jsxs(e.Fragment,{children:[e.jsx($e,{marginClass:"my-6 px-8 box-content -mx-8"}),e.jsx("p",{className:"text-white font-bold mb-3",children:c("settings.connections.workers.urlLabel")}),e.jsxs("div",{className:"my-6 space-y-2 max-w-md",children:[((s==null?void 0:s.length)??0)===0?e.jsx("p",{children:c("settings.connections.workers.emptyState")}):null,(s??[]).map((w,b)=>e.jsxs("div",{className:"grid grid-cols-[1fr,auto] items-center gap-2",children:[e.jsx(_t,{value:w,onChange:k=>h(b,k),placeholder:c("settings.connections.workers.urlPlaceholder")??void 0}),e.jsx("button",{type:"button",onClick:()=>m(b),className:"h-full scale-90 hover:scale-100 rounded-full aspect-square bg-authentication-inputBg hover:bg-authentication-inputBgHover flex justify-center items-center transition-transform duration-200 hover:text-white cursor-pointer",children:e.jsx(re,{className:"text-xl",icon:z.X})})]},b))]}),e.jsx(G,{theme:"purple",onClick:v,children:c("settings.connections.workers.addButton")}),e.jsx($e,{marginClass:"my-6 px-8 box-content -mx-8"}),e.jsxs("div",{className:"flex justify-between items-center gap-4",children:[e.jsxs("div",{className:"my-3",children:[e.jsx("p",{className:"text-white font-bold mb-3",children:c("settings.connections.workers.proxyTMDB.title")}),e.jsx("p",{className:"max-w-[30rem] font-medium",children:c("settings.connections.workers.proxyTMDB.description")})]}),e.jsx("div",{children:e.jsx(A,{enabled:o,onClick:()=>u(!o)})})]})]}):null]})}function ba({backendUrl:s,setBackendUrl:n}){const{t:o}=O(),u=W();return e.jsxs(ct,{children:[e.jsxs("div",{className:"flex justify-between items-center gap-4",children:[e.jsxs("div",{className:"my-3",children:[e.jsx("p",{className:"text-white font-bold mb-3",children:o("settings.connections.server.label")}),e.jsx("p",{className:"max-w-[30rem] font-medium",children:e.jsx(ne,{i18nKey:"settings.connections.server.description",children:e.jsx(Lt,{to:"https://docs.pstream.mov/backend/deploy",children:o("settings.connections.server.documentation")})})}),u.account&&e.jsxs("div",{children:[e.jsx("br",{}),e.jsx("p",{className:"max-w-[30rem] font-medium",children:e.jsx(ne,{i18nKey:"settings.connections.server.migration.description",children:e.jsx(Lt,{to:"/migration",children:o("settings.connections.server.migration.link")})})})]})]}),e.jsx("div",{children:e.jsx(A,{onClick:()=>n(c=>c===null?"":null),enabled:s!==null})})]}),s!==null?e.jsxs(e.Fragment,{children:[e.jsx($e,{marginClass:"my-6 px-8 box-content -mx-8"}),e.jsx("p",{className:"text-white font-bold mb-3",children:o("settings.connections.server.urlLabel")}),e.jsx(_t,{onChange:n,value:s??"",placeholder:"https://"})]}):null]})}async function ga(s){return s?await Tn(s):"unset"}function ha({febboxKey:s,setFebboxKey:n}){const{t:o}=O(),[u,c]=p.useState(!1),v=W(),h=f(),m=Ws("febbox-example-settings");p.useEffect(()=>{v.account&&s===null&&h.febboxKey&&n(h.febboxKey)},[v.account,s,h.febboxKey,n]);const[x,w]=p.useState("unset"),b={error:"error",success:"success",unset:"noresult",api_down:"error",invalid_token:"error"};if(p.useEffect(()=>{(async()=>{const g=await ga(s);w(g)})()},[s]),qs().ALLOW_FEBBOX_KEY)return e.jsxs(e.Fragment,{children:[e.jsxs(ct,{children:[e.jsxs("div",{className:"flex justify-between items-center gap-4",children:[e.jsxs("div",{className:"my-3",children:[e.jsx("p",{className:"text-white font-bold mb-3",children:o("fedapi.onboarding.title")}),e.jsx("p",{className:"max-w-[30rem] font-medium",children:e.jsx(ne,{i18nKey:"fedapi.onboarding.description"})})]}),e.jsx("div",{children:e.jsx(A,{onClick:()=>n(k=>k===null?"":null),enabled:s!==null})})]}),s!==null?e.jsxs(e.Fragment,{children:[e.jsx($e,{marginClass:"my-6 px-8 box-content -mx-8"}),e.jsxs("div",{className:"my-3",children:[e.jsxs("p",{className:"max-w-[30rem] font-medium",children:[o("fedapi.setup.title"),e.jsx("br",{}),e.jsxs("div",{onClick:()=>c(!u),className:"flex items-center justify-between p-1 px-2 my-2 w-fit border border-type-secondary rounded-lg cursor-pointer text-type-secondary hover:text-white transition-colors duration-200",children:[e.jsx("span",{className:"text-sm",children:o(u?"fedapi.setup.hideVideo":"fedapi.setup.showVideo")}),u?e.jsx(re,{icon:z.CHEVRON_UP,className:"pl-1"}):e.jsx(re,{icon:z.CHEVRON_DOWN,className:"pl-1"})]}),u&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"relative pt-[56.25%] mt-2",children:e.jsx("iframe",{src:"https://player.vimeo.com/video/1059834885?h=c3ab398d42&badge=0&autopause=0&player_id=0&app_id=58479",allow:"autoplay; fullscreen; picture-in-picture; clipboard-write; encrypted-media",className:"absolute top-0 left-0 w-full h-full border border-type-secondary rounded-lg bg-black",title:"P-Stream FED API Setup Tutorial"})}),e.jsx("br",{})]}),e.jsx(ne,{i18nKey:"fedapi.setup.step.1",children:e.jsx(Lt,{url:"https://febbox.com"})}),e.jsx("br",{}),e.jsx(ne,{i18nKey:"fedapi.setup.step.2"}),e.jsx("br",{}),e.jsx(ne,{i18nKey:"fedapi.setup.step.3"}),e.jsx("br",{}),e.jsx(ne,{i18nKey:"fedapi.setup.step.4"})," ",e.jsx("button",{type:"button",onClick:m.show,className:"text-type-link hover:text-type-linkHover",children:e.jsx(ne,{i18nKey:"fedapi.setup.tokenExample.button"})}),e.jsx("br",{}),e.jsx(ne,{i18nKey:"fedapi.setup.step.5"})]}),e.jsx("p",{className:"text-type-danger mt-2",children:e.jsx(ne,{i18nKey:"fedapi.setup.step.warning"})})]}),e.jsx($e,{marginClass:"my-6 px-8 box-content -mx-8"}),e.jsx("p",{className:"text-white font-bold",children:o("settings.connections.febbox.tokenLabel","Token")}),e.jsxs("div",{className:"flex items-center w-full gap-4",children:[e.jsx(dn,{type:b[x],className:"mx-2"}),e.jsx(_t,{onChange:k=>{n(k)},value:s??"",placeholder:"eyJ0eXAi...",passwordToggleable:!0,className:"flex-grow"}),e.jsx(Cn,{})]}),x==="error"&&e.jsx("p",{className:"text-type-danger mt-4",children:o("fedapi.status.failure")}),x==="api_down"&&e.jsx("p",{className:"text-type-danger mt-4",children:o("fedapi.status.api_down")}),x==="invalid_token"&&e.jsx("p",{className:"text-type-danger mt-4",children:o("fedapi.status.invalid_token")})]}):null]}),e.jsx(Gs,{id:m.id,children:e.jsxs(Ys,{children:[e.jsx(Dt,{className:"!mt-0 !mb-4 !text-2xl",children:o("fedapi.setup.tokenExample.title")}),e.jsx(Rs,{className:"!mt-1 !mb-6",children:o("fedapi.setup.tokenExample.description")}),e.jsx("div",{className:"bg-authentication-inputBg p-4 rounded-lg mb-6 font-mono text-sm break-all",children:"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpYXQiOjE3NDc1MTI2MTksIm5iZiI6MTc0NzUxMjYxOSwiZXhwIjoxNzc4NjE2NjM5LCJkYXRhIjp7InVpZCI6NTI1NTc3LCsudujeI6IjE4NTQ4NmEwMzBjMGNlMWJjY2IzYWJjMjI2OTYwYzQ4dhdhs.qkuTF2aVPu54S0RFJS_ca7rlHuGz_Fe6kWkBydYQoCg"}),e.jsx(Rs,{className:"!mt-1 !mb-6 text-type-danger",children:o("fedapi.setup.tokenExample.warning")}),e.jsx("div",{className:"flex justify-end",children:e.jsx(G,{theme:"secondary",onClick:m.hide,children:o("fedapi.setup.tokenExample.close")})})]})})]})}async function xa(s){return s?await kn(s):"unset"}function fa({realDebridKey:s,setRealDebridKey:n}){const{t:o}=O(),u=W(),c=f();p.useEffect(()=>{u.account&&s===null&&c.realDebridKey&&n(c.realDebridKey)},[u.account,s,c.realDebridKey,n]);const[v,h]=p.useState("unset"),m={error:"error",success:"success",unset:"noresult",api_down:"error",invalid_token:"error"};return p.useEffect(()=>{(async()=>{const w=await xa(s);h(w)})()},[s]),qs().ALLOW_REAL_DEBRID_KEY?e.jsxs(ct,{children:[e.jsxs("div",{className:"flex justify-between items-center gap-4",children:[e.jsxs("div",{className:"my-3",children:[e.jsx("p",{className:"text-white font-bold mb-3",children:o("realdebrid.title")}),e.jsx("p",{className:"max-w-[30rem] font-medium",children:o("realdebrid.description")}),e.jsx(Lt,{children:e.jsx("a",{href:"https://real-debrid.com/",target:"_blank",rel:"noreferrer",children:"real-debrid.com"})})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(A,{onClick:()=>n(x=>x===null?"":null),enabled:s!==null})})]}),s!==null?e.jsxs(e.Fragment,{children:[e.jsx($e,{marginClass:"my-6 px-8 box-content -mx-8"}),e.jsx("p",{className:"text-white font-bold mb-3",children:o("realdebrid.tokenLabel")}),e.jsxs("div",{className:"flex items-center w-full",children:[e.jsx(dn,{type:m[v],className:"mx-2 mr-4"}),e.jsx(_t,{onChange:x=>{n(x)},value:s??"",placeholder:"ABC123...",passwordToggleable:!0,className:"flex-grow"})]}),v==="error"&&e.jsx("p",{className:"text-type-danger mt-4",children:o("realdebrid.status.failure")}),v==="api_down"&&e.jsx("p",{className:"text-type-danger mt-4",children:o("realdebrid.status.api_down")}),v==="invalid_token"&&e.jsx("p",{className:"text-type-danger mt-4",children:o("realdebrid.status.invalid_token")})]}):null]}):null}function pa(s){const{t:n}=O();return e.jsxs("div",{children:[e.jsx(At,{border:!0,children:n("settings.connections.title")}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(Nn,{})," ",e.jsx(ma,{proxyUrls:s.proxyUrls,setProxyUrls:s.setProxyUrls,proxyTmdb:s.proxyTmdb,setProxyTmdb:s.setProxyTmdb}),e.jsx(ba,{backendUrl:s.backendUrl,setBackendUrl:s.setBackendUrl}),e.jsx(fa,{realDebridKey:s.realDebridKey,setRealDebridKey:s.setRealDebridKey}),e.jsx(ha,{febboxKey:s.febboxKey,setFebboxKey:s.setFebboxKey})]})]})}function ya(){const s=$s(),{t:n}=O();return e.jsx("div",{children:e.jsxs(Zt,{paddingClass:"px-6 py-12",className:"grid grid-cols-2 gap-12 mt-5",children:[e.jsxs("div",{children:[e.jsx(es,{children:n("settings.account.register.title")}),e.jsx("p",{className:"text-type-text",children:n("settings.account.register.text")})]}),e.jsx("div",{className:"flex justify-end items-center",children:e.jsx(G,{theme:"purple",onClick:()=>s("/register"),children:n("settings.account.register.cta")})})]})})}function nn(s){return e.jsxs("section",{className:s.className??"",children:[e.jsx("p",{className:"text-sm font-bold uppercase text-settings-sidebar-type-secondary mb-2",children:s.title}),s.children]})}function va(s){return e.jsxs("button",{type:"button",onClick:s.onClick,className:V("tabbable w-full px-3 py-2 flex items-center space-x-3 cursor-pointer rounded my-2",s.active?"bg-settings-sidebar-activeLink text-settings-sidebar-type-activated":null),children:[e.jsx(re,{className:V("text-2xl text-settings-sidebar-type-icon",s.active?"text-settings-sidebar-type-iconActivated":null),icon:s.icon}),e.jsx("span",{children:s.children})]})}const ja=16;function wa(s){const{t:n}=O(),o=s.url?s.url.startsWith("https://"):!1;return e.jsxs("div",{className:"flex items-center gap-1 -mx-1 ml-3 px-1 rounded bg-largeCard-background font-bold",children:[e.jsx(re,{icon:o?z.LOCK:z.UNLOCK}),n(o?"settings.sidebar.info.secure":"settings.sidebar.info.insecure")]})}function Sa(){var k;const{t:s}=O(),{isMobile:n}=un(),{account:o}=W(),u=location.hostname,[c,v]=p.useState(""),h=$s(),m=[{textKey:"settings.account.title",id:"settings-account",icon:z.USER},{textKey:"settings.preferences.title",id:"settings-preferences",icon:z.SETTINGS},{textKey:"settings.appearance.title",id:"settings-appearance",icon:z.BRUSH},{textKey:"settings.subtitles.title",id:"settings-captions",icon:z.CAPTIONS},{textKey:"settings.connections.title",id:"settings-connection",icon:z.LINK}],x=Pt(),w=zn(async()=>{if(x)return En(x)},[x]);p.useEffect(()=>{function g(){var j;const M=(window.innerHeight||document.documentElement.clientHeight)/4,I=m.map(U=>{const D=document.getElementById(U.id);if(!D)return{distance:1/0,link:U.id};const Z=D.getBoundingClientRect(),oe=Math.abs(M-Z.top),ye=Math.abs(M-Z.bottom);return{distance:Math.min(ye,oe),link:U.id}}).sort((U,D)=>U.distance-D.distance);window.innerHeight+window.scrollY>=document.body.offsetHeight?v(m[m.length-1].id):v(((j=I[0])==null?void 0:j.link)??"")}return document.addEventListener("scroll",g),g(),()=>{document.removeEventListener("scroll",g)}});const b=p.useCallback(g=>{const N=document.getElementById(g);if(!N)return null;const M=N.getBoundingClientRect().top+window.scrollY;window.scrollTo({top:M-120,behavior:"smooth"})},[]);return e.jsx("div",{className:"text-settings-sidebar-type-inactive sidebar-boundary",children:e.jsxs($n,{topOffset:-6*ja,stickyClassName:"pt-[6rem]",disabled:n,hideOnBoundaryHit:!1,boundaryElement:".sidebar-boundary",children:[e.jsxs("div",{className:"hidden lg:block",children:[e.jsx(nn,{title:s("global.pages.settings"),children:m.map(g=>e.jsx(va,{icon:g.icon,active:g.id===c,onClick:()=>b(g.id),children:s(g.textKey)},g.id))}),e.jsx($e,{})]}),e.jsx(nn,{className:"text-sm",title:s("settings.sidebar.info.title"),children:e.jsxs("div",{className:"px-3 py-3.5 rounded-lg bg-largeCard-background bg-opacity-50 grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2 space-y-1",children:[e.jsx("p",{className:"text-type-dimmed font-medium",children:s("settings.sidebar.info.hostname")}),e.jsx("p",{className:"text-white",children:u})]}),e.jsxs("div",{className:"col-span-2 space-y-1",children:[e.jsxs("div",{className:"text-type-dimmed font-medium flex items-center",children:[e.jsx("p",{children:s("settings.sidebar.info.backendUrl")}),e.jsx(wa,{url:x})]}),e.jsx("p",{className:"text-white",children:(x==null?void 0:x.replace(/https?:\/\//,""))??""})]}),e.jsxs("div",{className:"col-span-2 space-y-1",children:[e.jsx("p",{className:"text-type-dimmed font-medium",children:s("settings.sidebar.info.userId")}),e.jsx("p",{className:"text-white",children:(o==null?void 0:o.userId)??s("settings.sidebar.info.notLoggedIn")})]}),e.jsxs("div",{className:"col-span-1 space-y-1",children:[e.jsx("p",{className:"text-type-dimmed font-medium",children:s("settings.sidebar.info.appVersion")}),e.jsx("p",{className:"text-type-dimmed px-2 py-1 rounded bg-settings-sidebar-badge inline-block",children:qs().APP_VERSION})]}),e.jsxs("div",{className:"col-span-1 space-y-1",children:[e.jsx("p",{className:"text-type-dimmed font-medium",children:s("settings.sidebar.info.backendVersion")}),e.jsxs("p",{className:"text-type-dimmed px-2 py-1 rounded bg-settings-sidebar-badge inline-flex items-center gap-1",children:[w.error?e.jsx(re,{icon:z.WARNING,className:"text-type-danger text-base"}):null,w.loading?e.jsx("span",{className:"block h-4 w-12 bg-type-dimmed/20 rounded"}):((k=w==null?void 0:w.value)==null?void 0:k.version)||s("settings.sidebar.info.unknownVersion")]})]}),e.jsxs("div",{className:"col-span-2 space-y-1",children:[e.jsx("p",{className:"text-type-dimmed font-medium",children:s("settings.account.admin.title")}),e.jsx(G,{theme:"secondary",onClick:()=>h("/admin"),className:"w-full !p-2 text-xs",children:s("settings.account.admin.text")})]})]})})]})})}const Na=function(n){const{t:o}=O(),u=Gn(Zs.map(g=>g.code)),c=Dn(),v=Zs.sort((g,N)=>u.indexOf(g.code)-u.indexOf(N.code)).map(g=>({id:g.code,name:`${g.name}${g.nativeName?`  ${g.nativeName}`:""}`,leftIcon:e.jsx(Yn,{langCode:g.code})})),h=v.find(g=>{var N;return g.id===((N=qn(n.language))==null?void 0:N.code)}),m=mn().listSources(),x=p.useMemo(()=>{const g=Ln().listSources();return n.sourceOrder.map(N=>{var M;return{id:N,name:((M=m.find(I=>I.id===N))==null?void 0:M.name)||N,disabled:!g.find(I=>I.id===N),enabled:!n.disabledSources.includes(N)}})},[n.sourceOrder,n.disabledSources,m]),w=$s(),b=()=>{const g=!n.enableLowPerformanceMode;n.setEnableLowPerformanceMode(g),g&&(n.setEnableThumbnails(!1),n.setEnableAutoplay(!1))},k=g=>{const N=n.disabledSources.includes(g)?n.disabledSources.filter(M=>M!==g):[...n.disabledSources,g];n.setDisabledSources(N)};return e.jsxs("div",{className:"space-y-12",children:[e.jsx(At,{border:!0,children:o("settings.preferences.title")}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-bold mb-3",children:o("settings.preferences.language")}),e.jsx("p",{className:"max-w-[20rem] font-medium",children:o("settings.preferences.languageDescription")}),e.jsx(ln,{className:"w-full",options:v,selectedItem:h||v[0],setSelectedItem:g=>n.setLanguage(g.id)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-bold mb-3",children:o("settings.preferences.thumbnail")}),e.jsx("p",{className:"max-w-[25rem] font-medium",children:o("settings.preferences.thumbnailDescription")}),e.jsxs("div",{onClick:()=>{n.enableLowPerformanceMode||n.setEnableThumbnails(!n.enableThumbnails)},className:V("bg-dropdown-background hover:bg-dropdown-hoverBackground select-none my-4 cursor-pointer space-x-3 flex items-center max-w-[25rem] py-3 px-4 rounded-lg",n.enableLowPerformanceMode?"cursor-not-allowed opacity-50 pointer-events-none":"cursor-pointer opacity-100 pointer-events-auto"),children:[e.jsx(A,{enabled:n.enableThumbnails}),e.jsx("p",{className:"flex-1 text-white font-bold",children:o("settings.preferences.thumbnailLabel")})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-bold mb-3",children:o("settings.preferences.autoplay")}),e.jsx("p",{className:"max-w-[25rem] font-medium",children:o("settings.preferences.autoplayDescription")}),e.jsxs("div",{onClick:()=>c&&!n.enableLowPerformanceMode?n.setEnableAutoplay(!n.enableAutoplay):null,className:V("bg-dropdown-background hover:bg-dropdown-hoverBackground select-none my-4 cursor-pointer space-x-3 flex items-center max-w-[25rem] py-3 px-4 rounded-lg",c&&!n.enableLowPerformanceMode?"cursor-pointer opacity-100 pointer-events-auto":"cursor-not-allowed opacity-50 pointer-events-none"),children:[e.jsx(A,{enabled:n.enableAutoplay&&c}),e.jsx("p",{className:"flex-1 text-white font-bold",children:o("settings.preferences.autoplayLabel")})]}),n.enableAutoplay&&c&&!n.enableLowPerformanceMode&&e.jsxs("div",{className:"pt-4 pl-4 border-l-8 border-dropdown-background",children:[e.jsx("p",{className:"text-white font-bold mb-3",children:o("settings.preferences.skipCredits")}),e.jsx("p",{className:"max-w-[25rem] font-medium",children:o("settings.preferences.skipCreditsDescription")}),e.jsxs("div",{onClick:()=>n.setEnableSkipCredits(!n.enableSkipCredits),className:"bg-dropdown-background hover:bg-dropdown-hoverBackground select-none my-4 cursor-pointer space-x-3 flex items-center max-w-[25rem] py-3 px-4 rounded-lg",children:[e.jsx(A,{enabled:n.enableSkipCredits}),e.jsx("p",{className:"flex-1 text-white font-bold",children:o("settings.preferences.skipCreditsLabel")})]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-bold mb-3",children:o("settings.preferences.lowPerformanceMode")}),e.jsx("p",{className:"max-w-[25rem] font-medium",children:o("settings.preferences.lowPerformanceModeDescription")}),e.jsxs("div",{onClick:b,className:"bg-dropdown-background hover:bg-dropdown-hoverBackground select-none my-4 cursor-pointer space-x-3 flex items-center max-w-[25rem] py-3 px-4 rounded-lg",children:[e.jsx(A,{enabled:n.enableLowPerformanceMode}),e.jsx("p",{className:"flex-1 text-white font-bold",children:o("settings.preferences.lowPerformanceModeLabel")})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-bold mb-3",children:o("settings.preferences.holdToBoost")}),e.jsx("p",{className:"max-w-[25rem] font-medium",children:o("settings.preferences.holdToBoostDescription")}),e.jsxs("div",{onClick:()=>n.setEnableHoldToBoost(!n.enableHoldToBoost),className:"bg-dropdown-background hover:bg-dropdown-hoverBackground select-none my-4 cursor-pointer space-x-3 flex items-center max-w-[25rem] py-3 px-4 rounded-lg",children:[e.jsx(A,{enabled:n.enableHoldToBoost}),e.jsx("p",{className:"flex-1 text-white font-bold",children:o("settings.preferences.holdToBoostLabel")})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-bold mb-3",children:o("settings.preferences.doubleClickToSeek")}),e.jsx("p",{className:"max-w-[25rem] font-medium",children:o("settings.preferences.doubleClickToSeekDescription")}),e.jsxs("div",{onClick:()=>n.setEnableDoubleClickToSeek(!n.enableDoubleClickToSeek),className:"bg-dropdown-background hover:bg-dropdown-hoverBackground select-none my-4 cursor-pointer space-x-3 flex items-center max-w-[25rem] py-3 px-4 rounded-lg",children:[e.jsx(A,{enabled:n.enableDoubleClickToSeek}),e.jsx("p",{className:"flex-1 text-white font-bold",children:o("settings.preferences.doubleClickToSeekLabel")})]})]})]}),e.jsx("div",{id:"source-order",className:"space-y-8",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-bold mb-3",children:o("settings.preferences.manualSource")}),e.jsx("p",{className:"max-w-[25rem] font-medium",children:o("settings.preferences.manualSourceDescription")}),e.jsxs("div",{onClick:()=>n.setManualSourceSelection(!n.manualSourceSelection),className:"bg-dropdown-background hover:bg-dropdown-hoverBackground select-none my-4 cursor-pointer space-x-3 flex items-center max-w-[25rem] py-3 px-4 rounded-lg",children:[e.jsx(A,{enabled:n.manualSourceSelection}),e.jsx("p",{className:"flex-1 text-white font-bold",children:o("settings.preferences.manualSourceLabel")})]})]}),e.jsx("p",{className:"text-white font-bold",children:o("settings.preferences.sourceOrder")}),e.jsxs("div",{className:"max-w-[25rem] font-medium",children:[e.jsx(ne,{i18nKey:"settings.preferences.sourceOrderDescription",components:{bold:e.jsx("span",{className:"text-type-link font-bold cursor-pointer",onClick:()=>w("/onboarding/extension")})}}),e.jsxs("div",{onClick:()=>n.setenableSourceOrder(!n.enableSourceOrder),className:"bg-dropdown-background hover:bg-dropdown-hoverBackground select-none my-4 cursor-pointer space-x-3 flex items-center max-w-[25rem] py-3 px-4 rounded-lg",children:[e.jsx(A,{enabled:n.enableSourceOrder}),e.jsx("p",{className:"flex-1 text-white font-bold",children:o("settings.preferences.sourceOrderEnableLabel")})]})]}),n.enableSourceOrder&&e.jsxs("div",{className:"w-full flex flex-col gap-4",children:[e.jsx(Pn,{items:x,setItems:g=>n.setSourceOrder(g.map(N=>N.id)),onToggle:k}),e.jsx(G,{className:"max-w-[25rem]",theme:"secondary",onClick:()=>n.setSourceOrder(m.map(g=>g.id)),children:o("settings.reset")})]})]})})]})]})},Ca=Na;function ka(s){const{t:n}=O(),{isMobile:o}=un(),u=p.useRef(null),{width:c,height:v}=Wn(),h=16,[m,x]=p.useState(h),w=/iPad|iPhone|iPod/i.test(navigator.userAgent)&&window.matchMedia("(display-mode: standalone)").matches,b=w?60:h,g=v<c&&w?-40:0;return p.useEffect(()=>{c>1280?x(b):x(b+60+g)},[g,b,c]),e.jsxs(Hn,{ultraWide:!0,classNames:"overflow-visible",children:[e.jsx("div",{className:"fixed left-0 right-0 z-50",style:{top:`${m}px`},children:e.jsx(Vn,{children:e.jsx(Un,{ref:u,onChange:s.onSearchChange,value:s.searchQuery,onUnFocus:s.onSearchUnFocus,placeholder:n("settings.search.placeholder"),isSticky:!0,hideTooltip:!0})})}),e.jsxs("div",{className:V("grid gap-12",o?"grid-cols-1":"lg:grid-cols-[280px,1fr]"),"data-settings-content":!0,children:[e.jsx(Sa,{}),e.jsx("div",{children:s.children})]})]})}function Ta(s){const n=Pt(),{account:o}=s,[u,c]=Js(()=>n?_n(n,o):Promise.resolve([]),[o,n]);return p.useEffect(()=>{c()},[c]),e.jsxs(e.Fragment,{children:[e.jsx(ia,{deviceName:s.deviceName,setDeviceName:s.setDeviceName,colorA:s.colorA,setColorA:s.setColorA,colorB:s.colorB,setColorB:s.setColorB,userIcon:s.userIcon,setUserIcon:s.setUserIcon}),e.jsx(sa,{error:!!u.error,loading:u.loading,sessions:u.value??[],onChange:c}),e.jsx(na,{})]})}function Ba(){const[s,n]=p.useState("");p.useEffect(()=>{const i=window.location.hash;if(i){const T=document.querySelector(i);T&&T.scrollIntoView({behavior:"smooth"})}},[]);const{t:o}=O(),u=en(i=>i.theme),c=en(i=>i.setTheme),v=Vs(i=>i.previewTheme),h=Vs(i=>i.setPreviewTheme),m=p.useCallback((i,T)=>{if(n(i),document.querySelectorAll(".search-highlight").forEach(F=>{const K=F.parentNode;K&&(K.replaceChild(document.createTextNode(F.textContent||""),F),K.normalize())}),i.trim()){const F=document.createTreeWalker(document.querySelector("[data-settings-content]")||document.body,NodeFilter.SHOW_TEXT,null);let K=F.nextNode();for(;K;){const Fe=K.textContent||"",Ke=Fe.toLowerCase(),ce=i.toLowerCase();if(Ke.includes(ce)){const He=new RegExp(`(${i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi"),Se=Fe.replace(He,'<span class="search-highlight bg-yellow-200 text-black px-1 rounded">$1</span>');if(Se!==Fe){const xe=document.createElement("div");xe.innerHTML=Se;const ee=K.parentNode;if(ee){for(;xe.firstChild;)ee.insertBefore(xe.firstChild,K);ee.removeChild(K)}}}K=F.nextNode()}const q=document.querySelector(".search-highlight");q&&q.scrollIntoView({behavior:"smooth",block:"center"})}},[]),x=p.useCallback(i=>{i!==void 0&&n(i)},[]),w=tn(i=>i.language),b=tn(i=>i.setLanguage),k=zs(i=>i.styling),g=zs(i=>i.updateStyling),N=W(i=>i.proxySet),M=W(i=>i.setProxySet),I=W(i=>i.backendUrl),j=W(i=>i.setBackendUrl),U=f(i=>i.febboxKey),D=f(i=>i.setFebboxKey),Z=f(i=>i.realDebridKey),oe=f(i=>i.setRealDebridKey),ye=f(i=>i.enableThumbnails),le=f(i=>i.setEnableThumbnails),We=f(i=>i.enableAutoplay),Ge=f(i=>i.setEnableAutoplay),dt=f(i=>i.enableSkipCredits),ve=f(i=>i.setEnableSkipCredits),Ye=f(i=>i.sourceOrder),ge=f(i=>i.setSourceOrder),ut=f(i=>i.enableSourceOrder),ke=f(i=>i.setEnableSourceOrder),mt=f(i=>i.disabledSources),qe=f(i=>i.setDisabledSources),bt=f(i=>i.embedOrder),Je=f(i=>i.enableEmbedOrder),gt=f(i=>i.disabledEmbeds),ht=f(i=>i.enableDiscover),Xe=f(i=>i.setEnableDiscover),Qe=f(i=>i.enableFeatured),Ze=f(i=>i.setEnableFeatured),xt=f(i=>i.enableDetailsModal),C=f(i=>i.setEnableDetailsModal),Te=f(i=>i.enableImageLogos),et=f(i=>i.setEnableImageLogos),J=f(i=>i.proxyTmdb),Ee=f(i=>i.setProxyTmdb),De=f(i=>i.enableCarouselView),Le=f(i=>i.setEnableCarouselView),Pe=f(i=>i.forceCompactEpisodeView),_e=f(i=>i.setForceCompactEpisodeView),Ae=f(i=>i.enableLowPerformanceMode),Oe=f(i=>i.setEnableLowPerformanceMode),ft=f(i=>i.enableNativeSubtitles),pt=f(i=>i.enableHoldToBoost),tt=f(i=>i.setEnableHoldToBoost),yt=f(i=>i.homeSectionOrder),Me=f(i=>i.setHomeSectionOrder),vt=f(i=>i.manualSourceSelection),st=f(i=>i.setManualSourceSelection),jt=f(i=>i.enableDoubleClickToSeek),Ie=f(i=>i.setEnableDoubleClickToSeek),B=W(i=>i.account),nt=W(i=>i.setAccountProfile),he=W(i=>i.updateDeviceName),je=p.useMemo(()=>B?an(B.deviceName,Us(B.seed)):"",[B]),X=Pt(),{logout:Y}=on(),Be=W();p.useEffect(()=>{(async()=>{if(B&&X){const T=await Kn(X,B);T.febboxKey&&D(T.febboxKey),T.realDebridKey&&oe(T.realDebridKey)}})()},[B,X,D,oe]);const r=Qn(u,w,k,je,N,I,U,Z,B?B.profile:void 0,ye,We,ht,Qe,xt,Ye,ut,mt,bt,Je,gt,J,dt,Te,De,Pe,Ae,ft,pt,yt,vt,jt),wt=p.useMemo(()=>{const i=mn().listSources(),T=i.map(q=>q.id),_=r.sourceOrder.state,F=_.filter(q=>T.includes(q)),K=i.filter(q=>!_.includes(q.id)).map(q=>q.id);return[...F,...K]},[r.sourceOrder.state]);p.useEffect(()=>{h(u??"default")},[h,u]),p.useEffect(()=>()=>{h(null)},[h]);const at=p.useCallback(i=>{r.theme.set(i==="default"?null:i),h(i)},[r.theme,h]),we=p.useCallback(async()=>{var i,T;if(B&&X){if((r.appLanguage.changed||r.theme.changed||r.proxyUrls.changed||r.febboxKey.changed||r.realDebridKey.changed||r.enableThumbnails.changed||r.enableAutoplay.changed||r.enableSkipCredits.changed||r.enableDiscover.changed||r.enableFeatured.changed||r.enableDetailsModal.changed||r.enableImageLogos.changed||r.sourceOrder.changed||r.enableSourceOrder.changed||r.disabledSources.changed||r.proxyTmdb.changed||r.enableCarouselView.changed||r.forceCompactEpisodeView.changed||r.enableLowPerformanceMode.changed||r.enableHoldToBoost.changed||r.manualSourceSelection.changed||r.enableDoubleClickToSeek)&&await An(X,B,{applicationLanguage:r.appLanguage.state,applicationTheme:r.theme.state,proxyUrls:((i=r.proxyUrls.state)==null?void 0:i.filter(_=>_!==""))??null,febboxKey:r.febboxKey.state,realDebridKey:r.realDebridKey.state,enableThumbnails:r.enableThumbnails.state,enableAutoplay:r.enableAutoplay.state,enableSkipCredits:r.enableSkipCredits.state,enableDiscover:r.enableDiscover.state,enableFeatured:r.enableFeatured.state,enableDetailsModal:r.enableDetailsModal.state,enableImageLogos:r.enableImageLogos.state,sourceOrder:r.sourceOrder.state,enableSourceOrder:r.enableSourceOrder.state,disabledSources:r.disabledSources.state,proxyTmdb:r.proxyTmdb.state,enableCarouselView:r.enableCarouselView.state,forceCompactEpisodeView:r.forceCompactEpisodeView.state,enableLowPerformanceMode:r.enableLowPerformanceMode.state,enableHoldToBoost:r.enableHoldToBoost.state,manualSourceSelection:r.manualSourceSelection.state,enableDoubleClickToSeek:r.enableDoubleClickToSeek.state}),r.deviceName.changed){const _=await On(r.deviceName.state,Us(B.seed));await Mn(X,B,{deviceName:_}),he(_)}r.profile.changed&&await In(X,B,{profile:r.profile.state})}if(le(r.enableThumbnails.state),Ge(r.enableAutoplay.state),ve(r.enableSkipCredits.state),Xe(r.enableDiscover.state),Ze(r.enableFeatured.state),C(r.enableDetailsModal.state),et(r.enableImageLogos.state),ge(r.sourceOrder.state),ke(r.enableSourceOrder.state),qe(r.disabledSources.state),b(r.appLanguage.state),c(r.theme.state),g(r.subtitleStyling.state),M(((T=r.proxyUrls.state)==null?void 0:T.filter(_=>_!==""))??null),ke(r.enableSourceOrder.state),D(r.febboxKey.state),oe(r.realDebridKey.state),Ee(r.proxyTmdb.state),Le(r.enableCarouselView.state),_e(r.forceCompactEpisodeView.state),Oe(r.enableLowPerformanceMode.state),tt(r.enableHoldToBoost.state),Me(r.homeSectionOrder.state),st(r.manualSourceSelection.state),Ie(r.enableDoubleClickToSeek.state),r.profile.state&&nt(r.profile.state),r.backendUrl.changed){await Y();let _=r.backendUrl.state;_&&!_.startsWith("http://")&&!_.startsWith("https://")&&(_=`https://${_}`),j(_)}},[B,X,le,D,oe,r,Ge,ve,Xe,Ze,C,et,ge,ke,qe,b,c,g,M,he,nt,Y,j,Ee,Le,_e,Oe,tt,Me,st,Ie]);return e.jsxs(Bn,{children:[e.jsx(Fn,{subpage:!0,k:"global.pages.settings"}),e.jsxs(ka,{searchQuery:s,onSearchChange:m,onSearchUnFocus:x,children:[e.jsxs("div",{id:"settings-account",children:[e.jsx(At,{border:!0,className:"!mb-0",children:o("settings.account.title")}),Be.account&&r.profile.state?e.jsx(Ta,{account:Be.account,deviceName:r.deviceName.state,setDeviceName:r.deviceName.set,colorA:r.profile.state.colorA,setColorA:i=>{r.profile.set(T=>T?{...T,colorA:i}:void 0)},colorB:r.profile.state.colorB,setColorB:i=>r.profile.set(T=>T?{...T,colorB:i}:void 0),userIcon:r.profile.state.icon,setUserIcon:i=>r.profile.set(T=>T?{...T,icon:i}:void 0)}):e.jsx(ya,{})]}),e.jsx("div",{id:"settings-preferences",className:"mt-28",children:e.jsx(Ca,{language:r.appLanguage.state,setLanguage:r.appLanguage.set,enableThumbnails:r.enableThumbnails.state,setEnableThumbnails:r.enableThumbnails.set,enableAutoplay:r.enableAutoplay.state,setEnableAutoplay:r.enableAutoplay.set,enableSkipCredits:r.enableSkipCredits.state,setEnableSkipCredits:r.enableSkipCredits.set,sourceOrder:wt,setSourceOrder:r.sourceOrder.set,enableSourceOrder:r.enableSourceOrder.state,setenableSourceOrder:r.enableSourceOrder.set,disabledSources:r.disabledSources.state,setDisabledSources:r.disabledSources.set,enableLowPerformanceMode:r.enableLowPerformanceMode.state,setEnableLowPerformanceMode:r.enableLowPerformanceMode.set,enableHoldToBoost:r.enableHoldToBoost.state,setEnableHoldToBoost:r.enableHoldToBoost.set,manualSourceSelection:r.manualSourceSelection.state,setManualSourceSelection:r.manualSourceSelection.set,enableDoubleClickToSeek:r.enableDoubleClickToSeek.state,setEnableDoubleClickToSeek:r.enableDoubleClickToSeek.set})}),e.jsx("div",{id:"settings-appearance",className:"mt-28",children:e.jsx(da,{active:v??"default",inUse:u??"default",setTheme:at,enableDiscover:r.enableDiscover.state,setEnableDiscover:r.enableDiscover.set,enableFeatured:r.enableFeatured.state,setEnableFeatured:r.enableFeatured.set,enableDetailsModal:r.enableDetailsModal.state,setEnableDetailsModal:r.enableDetailsModal.set,enableImageLogos:r.enableImageLogos.state,setEnableImageLogos:r.enableImageLogos.set,enableCarouselView:r.enableCarouselView.state,setEnableCarouselView:r.enableCarouselView.set,forceCompactEpisodeView:r.forceCompactEpisodeView.state,setForceCompactEpisodeView:r.forceCompactEpisodeView.set,homeSectionOrder:r.homeSectionOrder.state,setHomeSectionOrder:r.homeSectionOrder.set,enableLowPerformanceMode:r.enableLowPerformanceMode.state})}),e.jsx("div",{id:"settings-captions",className:"mt-28",children:e.jsx(ua,{styling:r.subtitleStyling.state,setStyling:r.subtitleStyling.set})}),e.jsx("div",{id:"settings-connection",className:"mt-28",children:e.jsx(pa,{backendUrl:r.backendUrl.state,setBackendUrl:r.backendUrl.set,proxyUrls:r.proxyUrls.state,setProxyUrls:r.proxyUrls.set,febboxKey:r.febboxKey.state,setFebboxKey:r.febboxKey.set,realDebridKey:r.realDebridKey.state,setRealDebridKey:r.realDebridKey.set,proxyTmdb:r.proxyTmdb.state,setProxyTmdb:r.proxyTmdb.set})})]}),e.jsxs(cn,{animation:"fade",show:r.changed,className:"bg-settings-saveBar-background border-t border-settings-card-border/50 py-4 transition-opacity w-full fixed bottom-0 flex justify-between flex-col md:flex-row px-8 items-start md:items-center gap-3 z-[999]",children:[e.jsx("p",{className:"text-type-danger",children:o("settings.unsaved")}),e.jsxs("div",{className:"space-x-3 w-full md:w-auto flex",children:[e.jsx(G,{className:"w-full md:w-auto",theme:"secondary",onClick:r.reset,children:o("settings.reset")}),e.jsx(G,{className:"w-full md:w-auto",theme:"purple",onClick:we,children:o("settings.save")})]})]})]})}export{Ta as AccountSettings,Ba as SettingsPage,Ba as default};
